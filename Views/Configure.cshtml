@using Nop.Web.Framework.Models.DataTables;
@using Nop.Plugin.Widgets.HeaderSliderPlugin.Models;
@model ConfigurationSearchModel
@{
    Layout = "_ConfigurePlugin";
}


<form asp-controller="HeaderSlider" asp-action="Create" method="post" id="header-slider-form">
    <section class="content">
        <div class="container-fluid">
            <div class="cards-group">
                <div class="card-body">
                    @await Html.PartialAsync("Table", new DataTablesModel
                    {
                    Name = "header-slider-grid",
                    UrlRead = new DataUrl("List", "HeaderSlider", null),
                    UrlDelete= new DataUrl("Delete", "HeaderSlider",null),
                    Length = Model.PageSize,
                    LengthMenu = Model.AvailablePageSizes,
                    ColumnCollection = new List<ColumnProperty>
                    {
                    new ColumnProperty(nameof(ConfigurationModel.Title))
                    {
                    Title = "Title",
                    Width = "200"
                    },
                    new ColumnProperty(nameof(ConfigurationModel.StartDate))
                    {
                    Title = "Starting Date",
                    Width = "200"
                    },
                    new ColumnProperty(nameof(ConfigurationModel.EndDate))
                    {
                    Title = "Ending Date",
                    Width = "200"
                    },
                    new ColumnProperty(nameof(ConfigurationModel.IsDisabled))
                    {
                    Title = "Is Disabled",
                    Width = "200"
                    },
                    new ColumnProperty(nameof(ConfigurationModel.Zone))
                    {
                    Title = "Zone",
                    Width = "200"
                    },
                    new ColumnProperty(nameof(ConfigurationModel.Id))
                    {
                    Title = T("Admin.Common.Edit").Text,
                    ClassName = NopColumnClassDefaults.Button,
                    Width = "100",
                    Render = new RenderCustom("renderColumnEdit")
                    },
                    new ColumnProperty(nameof(ConfigurationModel.Id))
                    {
                    Title = T("Admin.Common.Delete").Text,
                    ClassName = NopColumnClassDefaults.Button,
                    Render = new RenderButtonRemove(T("Admin.Common.Delete").Text),
                    Width = "100"
                    }
                    }
                    })

                </div>
            </div>
        </div>
        <script>
            function renderColumnEdit(data, type, row, meta) {
                return '<button onclick=\"javascript:OpenWindow(\'@Url.Content("~/Admin/HeaderSlider/Edit/")' + data + '?btnId=btnRefresh&formId=header-slider-form\', 800, 800, true); return false;\" class="btn btn-default"><i class="fas fa-pencil-alt"></i>@T("Admin.Common.Edit").Text</button>';
            }
        </script>
        <script>
            $(document).ready(function () {
                $('#btnRefresh').click(function () {
                    //refresh grid
                    updateTable('#header-slider-grid');

                    //return false to don't reload a page
                    return false;
                });
            });
        </script>
    </section>
    <div class="card-footer">
        <button type="submit" id="btnAddNewOption" name="save" class="btn btn-primary" onclick="javascript:OpenWindow('@(Url.Action("Create", "HeaderSlider",  new { btnId = "btnRefresh", formId = "header-slider-form" }))', 800, 800, true); return false;">@T("Admin.Common.AddNew")</button>
    </div>
</form>
